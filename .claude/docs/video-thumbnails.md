# Video Thumbnail Generation Architecture

The system automatically generates thumbnails for video frames to optimize admin interface performance:

## Key Components

- **Video Thumbnail Utils** (`src/lib/videoThumbnailUtils.ts`) - Core thumbnail generation logic using FFmpeg
- **FFmpeg Integration** - Uses `ffmpeg-static` for reliable video processing
- **Sharp Processing** - Generates 320x320 WebP thumbnails matching existing image sizes
- **Automatic Generation** - Thumbnails created at 0.1 seconds into video during upload

## Implementation Details

- **File Processing** (`src/lib/fieldUtils.ts`) - Extended `convertFile` hook handles video thumbnail generation
- **Storage Integration** - Thumbnails added to `req.payloadUploadSizes.small` for automatic Payload storage handling
- **Automatic Storage** - Payload's storage adapter handles uploading thumbnail files (local, S3, etc.)
- **Component Integration** - `ThumbnailCell` and `FrameItem` components display thumbnails from `sizes.small.url`
- **File Cleanup** - Thumbnail files automatically deleted when Frame is deleted (via Payload's storage system)
- **URL Generation** - Thumbnail URLs automatically generated by Payload's storage adapter
- **Graceful Fallbacks** - Falls back to video elements when thumbnail generation fails
- **Error Handling** - Comprehensive error handling ensures system stability

## Admin Interface Benefits

- **Fast Loading** - Thumbnail images load significantly faster than video elements
- **Visual Identification** - Video content easily identifiable in admin lists and frame editor
- **Performance Optimized** - Reduces page load times when multiple video frames are displayed
- **Consistent UX** - Unified thumbnail display for both image and video content
